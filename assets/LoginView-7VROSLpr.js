import{_ as V,r as i,A as N,x as R,c as B,b as _,a as e,w as o,e as L,g as T,d as a,o as f,f as m,p as U,k as $}from"./index-DPcHszT_.js";import{U as q,C as K}from"./users.service-Cdh67N8Q.js";import{S as O}from"./SideCover-CPs84NI0.js";const P=r=>(U("data-v-dfc572aa"),r=r(),$(),r),j={class:"container"},A={class:"form"},F=P(()=>_("br",null,null,-1)),Y={__name:"LoginView",setup(r){const v={email:"",password:""},g=i(),n=N({...v}),l=i(""),p=i(!1),y=R();async function w({email:d,password:t}){p.value=!0;try{const s=await q.signIn({email:d,password:t});document.cookie=`${K}=${s.data.token}; expires=${s.data.exp}; SameSite=None; Secure`,setTimeout(()=>{y.push({path:"/myTodos"})},1e3)}catch(s){l.value=s.response.data.message,p.value=!1}}return(d,t)=>{const s=a("a-typography-title"),h=a("a-alert"),x=a("a-input"),u=a("a-form-item"),k=a("a-input-password"),S=a("a-button"),b=a("a-form"),C=a("RouterLink"),E=a("a-typography-text"),I=a("a-flex");return f(),B("main",null,[_("div",j,[e(O),_("div",A,[e(s,{level:3},{default:o(()=>[m("最實用的線上代辦服務")]),_:1}),l.value?(f(),L(h,{key:0,message:l.value,type:"error","show-icon":""},null,8,["message"])):T("",!0),F,e(b,{ref_key:"formRef",ref:g,model:n,name:"login","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",onFinish:w},{default:o(()=>[e(u,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"The input is not valid E-mail!"}]},{default:o(()=>[e(x,{value:n.email,"onUpdate:value":t[0]||(t[0]=c=>n.email=c)},null,8,["value"])]),_:1}),e(u,{label:"密碼",name:"password","has-feedback":"",rules:[{required:!0,message:"Please input your password!"}]},{default:o(()=>[e(k,{value:n.password,"onUpdate:value":t[1]||(t[1]=c=>n.password=c),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),e(u,{"wrapper-col":{offset:8,span:16}},{default:o(()=>[e(S,{"html-type":"submit",loading:p.value},{default:o(()=>[m("登入")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e(I,{justify:"center"},{default:o(()=>[e(E,null,{default:o(()=>[e(C,{to:"/signup"},{default:o(()=>[m("註冊帳號")]),_:1})]),_:1})]),_:1})])])])}}},H=V(Y,[["__scopeId","data-v-dfc572aa"]]);export{H as default};
