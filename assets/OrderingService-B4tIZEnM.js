import{d as R}from"./data-C9WNrbqo.js";import{_ as S,d as m,o as l,c as r,a as t,w as s,b as d,t as v,n as j,r as $,l as M,u as V,C as T,g,i as U,F as I,j as N,m as D,f as F,p as q,k as w,e as O}from"./index-eNYu7dyy.js";import{N as z}from"./NavBar-BvdjkH_j.js";const E={class:"name"},A={__name:"MenuCard",props:["data","disabled"],emits:["onClick"],setup(e,{emit:a}){const n=e,f=a,p=()=>{f("onClick",n.data)};return(y,i)=>{const c=m("a-flex");return l(),r("div",{class:j(["card",{disabled:e.disabled}]),onClick:p},[t(c,{gap:"middle",justify:"space-between",align:"center"},{default:s(()=>[d("p",E,v(e.data.name),1),d("p",null,"$"+v(e.data.price),1)]),_:1}),d("p",null,v(e.data.description),1)],2)}}},G=S(A,[["__scopeId","data-v-e4069e22"]]),H=e=>(q("data-v-40f5bd13"),e=e(),w(),e),J=["onClick"],K=["onUpdate:modelValue"],P={key:2},Q={class:"total"},W=H(()=>d("br",null,null,-1)),X={__name:"ShoppingCart",props:["data"],emits:["onRemoveCartItem","onSubmit"],setup(e,{emit:a}){const n=$(""),f=e,p=a,y=[{title:"操作",dataIndex:"operate",key:"operate"},{title:"品項",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"數量",dataIndex:"quantity",key:"quantity"},{title:"單價",dataIndex:"price",key:"price"},{title:"小計",dataIndex:"subtotal",key:"subtotal"}],i=u=>{p("onRemoveCartItem",u)},c=()=>{p("onSubmit",{total:o.value,memo:n.value}),n.value=""},o=M(()=>f.data.reduce((u,_)=>u+_.price*_.quantity,0));return(u,_)=>{const x=m("a-table"),C=m("a-flex"),B=m("a-textarea"),L=m("a-button");return l(),r(I,null,[t(x,{dataSource:e.data,columns:y,pagination:!1,local:{emptyText:"請選擇商品"}},{bodyCell:s(({column:h,record:k})=>[h.key==="operate"?(l(),r("span",{key:0,class:"remove",onClick:b=>i(k.id)},[t(V(T))],8,J)):g("",!0),h.key==="quantity"?U((l(),r("select",{key:1,"onUpdate:modelValue":b=>k.quantity=b},[(l(),r(I,null,N(10,b=>d("option",{key:b,selected:"record.quantity"},v(b),1)),64))],8,K)),[[D,k.quantity]]):g("",!0),h.key==="subtotal"?(l(),r("span",P,v(k.quantity*k.price),1)):g("",!0)]),_:1},8,["dataSource"]),t(C,{gap:"middle",justify:"flex-end"},{default:s(()=>[d("p",Q,"總計: $"+v(o.value),1)]),_:1}),t(B,{value:n.value,"onUpdate:value":_[0]||(_[0]=h=>n.value=h),"show-count":"",maxlength:100},null,8,["value"]),W,t(C,{gap:"middle",justify:"flex-end"},{default:s(()=>[t(L,{type:"primary",disabled:e.data.length===0,onClick:c},{default:s(()=>[F("送出")]),_:1},8,["disabled"])]),_:1})],64)}}},Y=S(X,[["__scopeId","data-v-40f5bd13"]]),Z=e=>(q("data-v-fda928d1"),e=e(),w(),e),ee=Z(()=>d("p",null,"訂單",-1)),te={class:"total"},ae={__name:"OrderedContent",props:["orderList","memo","total"],setup(e){const a=[{title:"品項",dataIndex:"name",key:"name"},{title:"數量",dataIndex:"quantity",key:"quantity"},{title:"小計",dataIndex:"subtotal",key:"subtotal"}];return(n,f)=>{const p=m("a-table"),y=m("a-flex");return l(),r(I,null,[ee,t(p,{dataSource:e.orderList,columns:a,pagination:!1},null,8,["dataSource"]),t(y,{gap:"middle",col:"",align:"flex-end",vertical:""},{default:s(()=>[d("p",null,"備註："+v(e.memo),1),d("p",te,"總計：$"+v(e.total),1)]),_:1})],64)}}},ne=S(ae,[["__scopeId","data-v-fda928d1"]]),oe=e=>(q("data-v-de813066"),e=e(),w(),e),le=oe(()=>d("h1",null,"餐點管理工具",-1)),de={class:"menu"},se={key:0,class:"noOrder"},ie={__name:"OrderingService",setup(e){const a=$([]),n=$({}),f=i=>{a.value.findIndex(c=>c.id===i.id)===-1&&a.value.unshift({...i,quantity:1})},p=i=>{const c=a.value.findIndex(o=>o.id===i);a.value.splice(c,1)},y=({memo:i,total:c})=>{a.value.length!==0&&(n.value={items:a.value.map(({name:o,quantity:u,price:_})=>({name:o,quantity:u,subtotal:u*_})),memo:i,total:c},a.value=[])};return(i,c)=>{const o=m("a-col"),u=m("a-row"),_=m("a-divider");return l(),r(I,null,[t(z),d("main",null,[le,t(u,null,{default:s(()=>[t(o,{span:7},{default:s(()=>[d("div",de,[(l(!0),r(I,null,N(V(R),x=>(l(),O(G,{key:x.id,data:x,disabled:a.value.findIndex(C=>C.id===x.id)!==-1,onOnClick:f},null,8,["data","disabled"]))),128))])]),_:1}),t(o,{span:1}),t(o,{span:16},{default:s(()=>[t(Y,{data:a.value,onOnRemoveCartItem:p,onOnSubmit:y},null,8,["data"])]),_:1})]),_:1}),t(_),t(u,null,{default:s(()=>[t(o,{span:4}),t(o,{span:16},{default:s(()=>[n.value.items?(l(),O(ne,{key:1,orderList:n.value.items,memo:n.value.memo,total:n.value.total},null,8,["orderList","memo","total"])):(l(),r("p",se,"尚未建立訂單"))]),_:1}),t(o,{span:4})]),_:1})])],64)}}},me=S(ie,[["__scopeId","data-v-de813066"]]);export{me as default};
