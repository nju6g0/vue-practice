import{d as B}from"./data-C9WNrbqo.js";import{_ as S,d as m,o as l,c as r,a as t,w as s,b as d,t as v,n as M,r as $,l as N,u as V,C as T,g,i as U,F as C,j as L,m as D,f as F,p as q,k as w,e as O}from"./index-D5AwOB9j.js";const z={class:"name"},E={__name:"MenuCard",props:["data","disabled"],emits:["onClick"],setup(e,{emit:a}){const n=e,f=a,p=()=>{f("onClick",n.data)};return(y,c)=>{const i=m("a-flex");return l(),r("div",{class:M(["card",{disabled:e.disabled}]),onClick:p},[t(i,{gap:"middle",justify:"space-between",align:"center"},{default:s(()=>[d("p",z,v(e.data.name),1),d("p",null,"$"+v(e.data.price),1)]),_:1}),d("p",null,v(e.data.description),1)],2)}}},A=S(E,[["__scopeId","data-v-e4069e22"]]),G=e=>(q("data-v-40f5bd13"),e=e(),w(),e),H=["onClick"],J=["onUpdate:modelValue"],K={key:2},P={class:"total"},Q=G(()=>d("br",null,null,-1)),W={__name:"ShoppingCart",props:["data"],emits:["onRemoveCartItem","onSubmit"],setup(e,{emit:a}){const n=$(""),f=e,p=a,y=[{title:"操作",dataIndex:"operate",key:"operate"},{title:"品項",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"數量",dataIndex:"quantity",key:"quantity"},{title:"單價",dataIndex:"price",key:"price"},{title:"小計",dataIndex:"subtotal",key:"subtotal"}],c=u=>{p("onRemoveCartItem",u)},i=()=>{p("onSubmit",{total:o.value,memo:n.value}),n.value=""},o=N(()=>f.data.reduce((u,_)=>u+_.price*_.quantity,0));return(u,_)=>{const x=m("a-table"),I=m("a-flex"),R=m("a-textarea"),j=m("a-button");return l(),r(C,null,[t(x,{dataSource:e.data,columns:y,pagination:!1,local:{emptyText:"請選擇商品"}},{bodyCell:s(({column:h,record:k})=>[h.key==="operate"?(l(),r("span",{key:0,class:"remove",onClick:b=>c(k.id)},[t(V(T))],8,H)):g("",!0),h.key==="quantity"?U((l(),r("select",{key:1,"onUpdate:modelValue":b=>k.quantity=b},[(l(),r(C,null,L(10,b=>d("option",{key:b,selected:"record.quantity"},v(b),1)),64))],8,J)),[[D,k.quantity]]):g("",!0),h.key==="subtotal"?(l(),r("span",K,v(k.quantity*k.price),1)):g("",!0)]),_:1},8,["dataSource"]),t(I,{gap:"middle",justify:"flex-end"},{default:s(()=>[d("p",P,"總計: $"+v(o.value),1)]),_:1}),t(R,{value:n.value,"onUpdate:value":_[0]||(_[0]=h=>n.value=h),"show-count":"",maxlength:100},null,8,["value"]),Q,t(I,{gap:"middle",justify:"flex-end"},{default:s(()=>[t(j,{type:"primary",disabled:e.data.length===0,onClick:i},{default:s(()=>[F("送出")]),_:1},8,["disabled"])]),_:1})],64)}}},X=S(W,[["__scopeId","data-v-40f5bd13"]]),Y=e=>(q("data-v-fda928d1"),e=e(),w(),e),Z=Y(()=>d("p",null,"訂單",-1)),ee={class:"total"},te={__name:"OrderedContent",props:["orderList","memo","total"],setup(e){const a=[{title:"品項",dataIndex:"name",key:"name"},{title:"數量",dataIndex:"quantity",key:"quantity"},{title:"小計",dataIndex:"subtotal",key:"subtotal"}];return(n,f)=>{const p=m("a-table"),y=m("a-flex");return l(),r(C,null,[Z,t(p,{dataSource:e.orderList,columns:a,pagination:!1},null,8,["dataSource"]),t(y,{gap:"middle",col:"",align:"flex-end",vertical:""},{default:s(()=>[d("p",null,"備註："+v(e.memo),1),d("p",ee,"總計：$"+v(e.total),1)]),_:1})],64)}}},ae=S(te,[["__scopeId","data-v-fda928d1"]]),ne=e=>(q("data-v-83a50c53"),e=e(),w(),e),oe=ne(()=>d("h1",null,"餐點管理工具",-1)),le={class:"menu"},se={key:0,class:"noOrder"},de={__name:"OrderingService",setup(e){const a=$([]),n=$({}),f=c=>{a.value.findIndex(i=>i.id===c.id)===-1&&a.value.unshift({...c,quantity:1})},p=c=>{const i=a.value.findIndex(o=>o.id===c);a.value.splice(i,1)},y=({memo:c,total:i})=>{a.value.length!==0&&(n.value={items:a.value.map(({name:o,quantity:u,price:_})=>({name:o,quantity:u,subtotal:u*_})),memo:c,total:i},a.value=[])};return(c,i)=>{const o=m("a-col"),u=m("a-row"),_=m("a-divider");return l(),r("main",null,[oe,t(u,null,{default:s(()=>[t(o,{span:7},{default:s(()=>[d("div",le,[(l(!0),r(C,null,L(V(B),x=>(l(),O(A,{key:x.id,data:x,disabled:a.value.findIndex(I=>I.id===x.id)!==-1,onOnClick:f},null,8,["data","disabled"]))),128))])]),_:1}),t(o,{span:1}),t(o,{span:16},{default:s(()=>[t(X,{data:a.value,onOnRemoveCartItem:p,onOnSubmit:y},null,8,["data"])]),_:1})]),_:1}),t(_),t(u,null,{default:s(()=>[t(o,{span:4}),t(o,{span:16},{default:s(()=>[n.value.items?(l(),O(ae,{key:1,orderList:n.value.items,memo:n.value.memo,total:n.value.total},null,8,["orderList","memo","total"])):(l(),r("p",se,"尚未建立訂單"))]),_:1}),t(o,{span:4})]),_:1})])}}},ue=S(de,[["__scopeId","data-v-83a50c53"]]);export{ue as default};
