import{U as E}from"./users.service-Cdh67N8Q.js";import{S as I}from"./SideCover-C5Htxqn7.js";import{_ as N,r as m,A as R,c as q,b as _,a as e,w as t,e as F,g as T,d as s,o as b,f as n,u as L,B as z,t as A,p as D,k as M}from"./index-eNYu7dyy.js";const O=i=>(D("data-v-652dab13"),i=i(),M(),i),W={class:"container"},G={class:"form"},H=O(()=>_("br",null,null,-1)),J={__name:"SignupView",setup(i){const S={email:"",nickname:"",password:"",checkPass:""},f=m(),o=R({...S}),u=m(""),v=m(!1),c=m(!1),x={email:[{required:!0,message:"Please input your email!"},{type:"email",message:"The input is not valid E-mail!"}],nickname:[{required:!0,message:"Please input your nickname!"}],password:[{required:!0,validator:async(p,a)=>a===""?Promise.reject("Please input the password"):(o.checkPass!==""&&f.value.validateFields("checkPass"),Promise.resolve()),trigger:"change"}],checkPass:[{validator:async(p,a)=>a===""?Promise.reject("Please input the password again"):a!==o.password?Promise.reject("Two inputs don't match!"):Promise.resolve(),trigger:"change"}]};async function U({email:p,nickname:a,password:d}){v.value=!0;try{await E.signUp({email:p,nickname:a,password:d}),c.value=!0}catch(g){u.value=g.response.data.message}v.value=!1}const C=()=>{f.value.resetFields(),u.value="",c.value=!1};return(p,a)=>{const d=s("a-typography-title"),g=s("a-alert"),k=s("a-input"),r=s("a-form-item"),y=s("a-input-password"),h=s("a-button"),V=s("a-form"),w=s("RouterLink"),B=s("a-typography-text"),P=s("a-flex"),j=s("a-modal");return b(),q("main",null,[_("div",W,[e(I),_("div",G,[e(d,{level:3},{default:t(()=>[n("註冊帳號")]),_:1}),u.value?(b(),F(g,{key:0,message:u.value,type:"error","show-icon":""},null,8,["message"])):T("",!0),H,e(V,{ref_key:"formRef",ref:f,model:o,name:"signup","label-col":{span:8},"wrapper-col":{span:16},rules:x,autocomplete:"off",onFinish:U},{default:t(()=>[e(r,{label:"Email",name:"email"},{default:t(()=>[e(k,{value:o.email,"onUpdate:value":a[0]||(a[0]=l=>o.email=l)},null,8,["value"])]),_:1}),e(r,{label:"您的暱稱",name:"nickname"},{default:t(()=>[e(k,{value:o.nickname,"onUpdate:value":a[1]||(a[1]=l=>o.nickname=l)},null,8,["value"])]),_:1}),e(r,{label:"密碼",name:"password","has-feedback":""},{default:t(()=>[e(y,{value:o.password,"onUpdate:value":a[2]||(a[2]=l=>o.password=l),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),e(r,{label:"再次輸入密碼",name:"checkPass","has-feedback":""},{default:t(()=>[e(y,{value:o.checkPass,"onUpdate:value":a[3]||(a[3]=l=>o.checkPass=l),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),e(r,{"wrapper-col":{offset:8,span:16}},{default:t(()=>[e(h,{"html-type":"submit",loading:v.value},{default:t(()=>[n("註冊帳號")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e(P,{justify:"center"},{default:t(()=>[e(B,null,{default:t(()=>[n("已有帳號？前往"),e(w,{to:"/login"},{default:t(()=>[n("登入")]),_:1})]),_:1})]),_:1})])]),e(j,{open:c.value,"onUpdate:open":a[4]||(a[4]=l=>c.value=l),centered:"",footer:null,closable:!1},{default:t(()=>[e(P,{gap:"middle",align:"center",vertical:""},{default:t(()=>[e(L(z),{style:{color:"green","font-size":"50px"}}),e(d,{level:3},{default:t(()=>[n("註冊成功")]),_:1}),_("p",null,[n("Welcome! "+A(o.nickname)+", 請前往",1),e(w,{to:"/login"},{default:t(()=>[n("登入")]),_:1})]),e(h,{onClick:C},{default:t(()=>[n("關閉")]),_:1})]),_:1})]),_:1},8,["open"])])}}},$=N(J,[["__scopeId","data-v-652dab13"]]);export{$ as default};
